<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta name="google-site-verification" content="WIBYTs2Vy14HvrnHixbBGSFenycHFvmqQKvWEK4PogU"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="lanourain"><title>ArrayList和LinkedList浅析 | Lanourain's blog</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">ArrayList和LinkedList浅析</h1><a id="logo" href="/.">Lanourain's blog</a><p class="description">I fight, so you don't have to.</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">ArrayList和LinkedList浅析</h1><div class="post-meta">Jun 27, 2017<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2017/06/27/ArrayList-And-LinkedList/" href="/2017/06/27/ArrayList-And-LinkedList/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><h3 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h3><p><img src="http://i.imgur.com/pn9EhhS.jpg" alt=""></p>
<p>List的动态数组实现，线程不安全，可以存null。</p>
<h4 id="interface-Iterable"><a href="#interface-Iterable" class="headerlink" title="interface Iterable"></a>interface Iterable<t></t></h4><p>可迭代的抽象集合接口，包含一个迭代器（iterator），实现该接口的集合支持迭代遍历。</p>
<h4 id="interface-Collection-extends-Iterable"><a href="#interface-Collection-extends-Iterable" class="headerlink" title="interface Collection extends Iterable"></a>interface Collection<e> extends Iterable<e></e></e></h4><p>集合的最基本接口，定义了集合应该包含的基本方法。如下选取了部分方法：</p>
<ul>
<li>size() ：返回集合包含元素个数</li>
<li>isEmpty() ：判断集合是否为空</li>
<li>contains(Object o) ：判断对象是否包含</li>
<li>Iterator<e> iterator() ：提供迭代器</e></li>
<li>add(E e) ：添加元素（add(int index)不是集合基本方法，是根据集合的属性衍生出来的功能）</li>
<li>remove(Object o) ：删除元素（不提供remove(int index)，原因同上）</li>
</ul>
<h4 id="abstract-class-AbstractCollection-implements-Collection"><a href="#abstract-class-AbstractCollection-implements-Collection" class="headerlink" title="abstract class AbstractCollection implements Collection"></a>abstract class AbstractCollection<e> implements Collection<e></e></e></h4><p>提供了Collection的骨架（skeletal）实现，减小了实现Collection接口的代价。<br>AbstractCollection实现了Collection中可以依赖Collection中包含接口可实现的接口，剩余的接口让子类自己去实现。<br>比如Collection.isEmpty()，只需要调用Collection.size()判断是否为0就可，所以AbstractCollection实现了isEmpty()方法，子类只需要实现size() 方法就可。</p>
<h4 id="interface-List-extends-Collection"><a href="#interface-List-extends-Collection" class="headerlink" title="interface List extends Collection"></a>interface List<e> extends Collection<e></e></e></h4><p>List，Set，Map是用来区分不同类型的集合的。<br>List表示其中的元素按线性方式存储，可以有重复对象，允许按照对象在集合中的索引位置检索对象，允许排序等。<br>所以在Collection的基础上，List添加了如add(int index, E element) 在指定位置添加元素，get(int index) 通过index获取元素，indexOf(Object o) 判断元素所在index，sort() 排序等在线性存储时适用的方法。<br>List的子类通常使用数组来存储元素。</p>
<h4 id="interface-Cloneable"><a href="#interface-Cloneable" class="headerlink" title="interface Cloneable"></a>interface Cloneable</h4><p>标记接口（在执行相关方法时，会检查是否实现了特定接口），实现该接口的类可以使用java.lang.Object.clone()方法进行浅克隆。</p>
<h4 id="interface-RandomAccess"><a href="#interface-RandomAccess" class="headerlink" title="interface RandomAccess"></a>interface RandomAccess</h4><p>标记接口，实现该接口的类表示支持快速随机访问（通过index访问），未实现的随机访问成本较高（比如LinkedList未实现该接口）</p>
<h4 id="interface-Serializable"><a href="#interface-Serializable" class="headerlink" title="interface Serializable"></a>interface Serializable</h4><p>标记接口，实现该接口的类表示支持序列化相关的操作。</p>
<h4 id="abstract-class-AbstractList-extends-AbstractCollection-implements-List"><a href="#abstract-class-AbstractList-extends-AbstractCollection-implements-List" class="headerlink" title="abstract class AbstractList extends AbstractCollection implements List"></a>abstract class AbstractList<e> extends AbstractCollection<e> implements List<e></e></e></e></h4><p>提供了List的骨架（skeletal）实现，减小实现List接口的代价。因为List是在Collection基础上的扩展，所以AbstractList首先继承AbstractCollection来复用已经实现了的Collection方法，AbstractList主要实现了List中的部分可以通过现有方法实现的扩展方法。<br>如indexOf(Object o) 判断元素所在index，通过调用迭代器遍历元素实现。</p>
<h4 id="class-ArrayList-extends-AbstractList-implements-List-RandomAccess-Cloneable-java-io-Serializable"><a href="#class-ArrayList-extends-AbstractList-implements-List-RandomAccess-Cloneable-java-io-Serializable" class="headerlink" title="class ArrayList extends AbstractList implements List, RandomAccess, Cloneable, java.io.Serializable"></a>class ArrayList<e> extends AbstractList<e> implements List<e>, RandomAccess, Cloneable, java.io.Serializable</e></e></e></h4><p>List的动态数组方式实现，元素允许为null，提供基本的add，get，remove，foreach功能。<br>ArrayList 使用数组来存储元素，可是指定初始化数组的容量大小，或者默认一个空数组（空数组首次扩容为10）。</p>
<ul>
<li>ArrayList适合只在队尾插入元素，同时需要随机访问元素时使用会有很好的性能。</li>
<li>ArrayList 线程不安全。</li>
<li>访问：通过index直接访问数组中的元素。(复杂度：O(1))</li>
<li>扩容：ArrayList的容量最大可达2^31-1 ，每次扩容后的数组长度是 min(MAX_ARRAY_SIZE, old + (old &gt;&gt; 1))</li>
<li>插入：默认的add操作是在数组尾添加元素，当然也可以指定index进行插入（index后面的数组使用java.lang.System#arraycopy本地方法，进行后移）</li>
<li>删除：基本的删除一个元素的操作（指定index或object），都是在确定index后，将index后的子串进行前移一格。removeAll则略有不同，通过遍历数组，将需要保留的元素按顺序放入数组，然后清空剩余的子串。(复杂度：O(N))具体实现如下：</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> r = <span class="number">0</span>, w = <span class="number">0</span>;</div><div class="line"><span class="keyword">for</span> (; r &lt; <span class="keyword">size</span>; r++)</div><div class="line">    <span class="keyword">if</span> (c.contains(elementData[r]) == <span class="keyword">false</span>)</div><div class="line">        elementData[w++] = elementData[r];</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = w; i &lt; <span class="keyword">size</span>; i++)</div><div class="line">    elementData[i] = <span class="keyword">null</span>;</div></pre></td></tr></table></figure>
<ul>
<li>迭代：ArrayList实现了ListIterator，在基本的Iterator基础上支持反向遍历等。</li>
<li>相等：通过listIterator遍历两个list的元素判断是否相等，包含元素都相等则List相等。</li>
<li>排序：使用数组的通用排序方法进行排序java.util.Arrays#sort(T[], int, int, java.util.Comparator&lt;? super T&gt;)；</li>
</ul>
<h3 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h3><p><img src="http://i.imgur.com/7rI5phI.jpg" alt=""></p>
<p>List的双向链表实现，线程不安全，可以存null。</p>
<h4 id="interface-Queue-extends-Collection"><a href="#interface-Queue-extends-Collection" class="headerlink" title="interface Queue extends Collection"></a>interface Queue<e> extends Collection<e></e></e></h4><p>Queue是用来区分不同类型的集合的一种。<br>Queue接口表示集合支持队列的属性，先进先出，FIFO (first-in-first-out)。但是该规则非必须，只需要规定某种优先级，优先极高的先出队列就可以属于Queue，比如优先队列，比如Stack(FILO，先进后出)<br>Queue定义了队列支持的基本方法，和List略微有不同：</p>
<ul>
<li>offer() 添加元素到队尾</li>
<li>remove()，poll() 返回队首元素，并从queue中移除</li>
<li>element()，peek() 返回队首元素，不移除</li>
</ul>
<h4 id="interface-Deque-extends-Queue"><a href="#interface-Deque-extends-Queue" class="headerlink" title="interface Deque extends Queue"></a>interface Deque<e> extends Queue<e></e></e></h4><p>Queue的一种线性的实现，支持从队首对尾插入或访问元素(double ended queue)。所以包含的方法在Queue的基础上，区分头尾的操作(offerFirst , offerLast)</p>
<h4 id="abstract-class-AbstractSequentialList-extends-AbstractList"><a href="#abstract-class-AbstractSequentialList-extends-AbstractList" class="headerlink" title="abstract class AbstractSequentialList extends AbstractList"></a>abstract class AbstractSequentialList<e> extends AbstractList<e></e></e></h4><p>为List的线性实现提供骨架实现。线性实现<strong>支持按顺序访问数据，不支持随机访问数据（或者随机访问数据代价较高）</strong>，比如链表，无法和数组一样通过index直接定位元素，需要迭代到相应的index才能获取。<br>因为AbstractSequentialList无法按照index快速访问对应元素，所以get() 是通过listIterator迭代器来获取对应index的元素。包括set(), add(), addAll(), remove() 都是迭代到对应的index，然后进行操作。</p>
<h4 id="class-LinkedList-extends-AbstractSequentialList-implements-List-Deque-Cloneable-java-io-Serializable"><a href="#class-LinkedList-extends-AbstractSequentialList-implements-List-Deque-Cloneable-java-io-Serializable" class="headerlink" title="class LinkedList extends AbstractSequentialList implements List, Deque, Cloneable, java.io.Serializable"></a>class LinkedList<e> extends AbstractSequentialList<e> implements List<e>, Deque<e>, Cloneable, java.io.Serializable</e></e></e></e></h4><p>List的双向链表实现，在基础的List操作上，支持在队首队尾进行add、get、remove等操作，可以用作队列、栈、双向链表的实现。<br>LinkedList使用链表存储元素，不像数组存储，元素不是连续的，而是通过在每个元素上添加其前后元素的指针来把链表连接起来，所以很多操作(add, remove等)首先遍历到对应位置，然后更改元素的前后指针。</p>
<ul>
<li>在需要经常在队列的中部插入元素时，LinkedList会比较合适。</li>
<li>LinkedList 线程不安全。</li>
<li>节点定义：</li>
</ul>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">class <span class="keyword">Node</span><span class="title">&lt;E</span>&gt; &#123;</div><div class="line">    E item;</div><div class="line">    <span class="keyword">Node</span><span class="title">&lt;E</span>&gt; next;</div><div class="line">    <span class="keyword">Node</span><span class="title">&lt;E</span>&gt; prev;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>插入：链表的插入操作通过改变每个节点的前后指针就可以实现。指定插入位置的操作复杂度为(O(N))，主要用在遍历到index的位置。首尾操作的话为O(1)。</li>
</ul>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">void linkBefore(E e, <span class="keyword">Node</span><span class="title">&lt;E</span>&gt; succ) &#123;</div><div class="line">    final <span class="keyword">Node</span><span class="title">&lt;E</span>&gt; pred = succ.prev;</div><div class="line">    final <span class="keyword">Node</span><span class="title">&lt;E</span>&gt; newNode = new <span class="keyword">Node</span><span class="title">&lt;&gt;(pred</span>, e, succ);</div><div class="line">    succ.prev = newNode;</div><div class="line">    if (pred == null)</div><div class="line">        first = newNode;</div><div class="line">    else</div><div class="line">        pred.next = newNode;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>访问：链表不支持O(1)的随机访问，如果要访问index的元素，需要从队首或队尾进行遍历到对应位置，复杂度O(N)。</li>
</ul>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">Node&lt;E&gt; node(<span class="keyword">int</span> <span class="keyword">index</span>) &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">index</span> &lt; (size &gt;&gt; <span class="number">1</span>)) &#123;</div><div class="line">        Node&lt;E&gt; <span class="keyword">x</span> = first;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">index</span>; i++)</div><div class="line">            <span class="keyword">x</span> = x.next;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">x</span>;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        Node&lt;E&gt; <span class="keyword">x</span> = <span class="keyword">last</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = size - <span class="number">1</span>; i &gt; <span class="keyword">index</span>; i--)</div><div class="line">            <span class="keyword">x</span> = x.prev;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">x</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://lanourain.github.io/2017/06/27/ArrayList-And-LinkedList/" data-id="cj72z2fpw00046w66a9d8s0og" class="article-share-link">Share</a><div class="tags"><a href="/tags/java/">java</a><a href="/tags/jdk/">jdk</a></div><div class="post-nav"><a href="/2017/07/03/Intro-SVN/" class="pre">SVN简介</a><a href="/2017/06/21/JVM-2-GC/" class="next">深入理解Java虚拟机 - 垃圾收集器与内存分配策略</a></div><div id="disqus_thread"><script>var disqus_shortname = 'lanourain@gmail.com';
var disqus_identifier = '2017/06/27/ArrayList-And-LinkedList/';
var disqus_title = 'ArrayList和LinkedList浅析';
var disqus_url = 'http://lanourain.github.io/2017/06/27/ArrayList-And-LinkedList/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//lanourain@gmail.com.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://lanourain.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/jvm/" style="font-size: 15px;">jvm</a> <a href="/tags/daily/" style="font-size: 15px;">daily</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/版本管理/" style="font-size: 15px;">版本管理</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/jdk/" style="font-size: 15px;">jdk</a> <a href="/tags/动漫/" style="font-size: 15px;">动漫</a> <a href="/tags/历史/" style="font-size: 15px;">历史</a> <a href="/tags/SVN/" style="font-size: 15px;">SVN</a> <a href="/tags/软件工程/" style="font-size: 15px;">软件工程</a> <a href="/tags/Team/" style="font-size: 15px;">Team</a> <a href="/tags/Management/" style="font-size: 15px;">Management</a> <a href="/tags/ansible/" style="font-size: 15px;">ansible</a> <a href="/tags/Reading/" style="font-size: 15px;">Reading</a> <a href="/tags/design-patterns/" style="font-size: 15px;">design_patterns</a> <a href="/tags/effective-java/" style="font-size: 15px;">effective java</a> <a href="/tags/project/" style="font-size: 15px;">project</a> <a href="/tags/bit/" style="font-size: 15px;">bit</a> <a href="/tags/algorithm/" style="font-size: 15px;">algorithm</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/09/08/HashMap/">HashMap浅析</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/02/Git-Base/">Git基础</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/03/Intro-SVN/">SVN简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/27/ArrayList-And-LinkedList/">ArrayList和LinkedList浅析</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/21/JVM-2-GC/">深入理解Java虚拟机 - 垃圾收集器与内存分配策略</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/20/JVM-1-Memory-Model/">深入理解Java虚拟机 - Java内存模型</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/18/effective-java/">effective java 笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/17/singleton/">单例模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/17/promise_patterns/">Promise模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/28/OKR-Summary/">OKR简介</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Recent Comments</i></div><script type="text/javascript" src="//lanourain@gmail.com.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Blogroll</i></div><ul></ul><a href="http://blog.yongbin.me/" title="El Psy Congroo" target="_blank">El Psy Congroo</a><ul></ul><a href="https://majiahui.github.io/" title="Jiahui's Blog" target="_blank">Jiahui's Blog</a><ul></ul><a href="http://czmonster.com/" title="Day Day Up" target="_blank">Day Day Up</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Lanourain's blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>