<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta name="google-site-verification" content="WIBYTs2Vy14HvrnHixbBGSFenycHFvmqQKvWEK4PogU"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="lanourain"><title>ansible基础教程 | Lanourain's blog</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">ansible基础教程</h1><a id="logo" href="/.">Lanourain's blog</a><p class="description">I fight, so you don't have to.</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">ansible基础教程</h1><div class="post-meta">Feb 16, 2017<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2017/02/16/ansible_basic/" href="/2017/02/16/ansible_basic/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p>ansible 是一个轻量级的IT自动化工具，集合了众多运维工具（puppet、cfengine、chef、func、fabric）的优点，实现了批量系统配置、批量程序部署、批量运行命令等功能。</p>
<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul>
<li>SSH by default</li>
<li>No agents: controlled hosts / devices need no agent sofware</li>
<li>No server: any linux machine can do Ansible activities via terminal commands</li>
<li>Modules in any languages: the modules can be developed in any languages</li>
<li>YAML, not code: using YAML language(标记语言，类XML) to write playbook</li>
<li>Strong multi-tier solution：可实现多级指挥</li>
</ul>
<h3 id="ansible-配置文件"><a href="#ansible-配置文件" class="headerlink" title="ansible 配置文件"></a>ansible 配置文件</h3><ul>
<li><p><a href="http://docs.ansible.com/ansible/intro_configuration.html" target="_blank" rel="external">ansible.cfg</a> </p>
<ul>
<li>定义各种通用变量</li>
<li>查找ansible.cfg文件的顺序<ul>
<li>ANSIBLE_CONFIG环境变量所指定的文件</li>
<li>./ansible.cfg</li>
<li>~/.ansible.cfg</li>
<li>/etc/ansible/ansible.cfg</li>
</ul>
</li>
<li><p>配置举例：</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">inventory = <span class="meta-keyword">/etc/</span>ansible/hosts  <span class="meta">#指定inventory文件位置</span></div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="Inventory"><a href="#Inventory" class="headerlink" title="Inventory"></a>Inventory</h3><p>Ansible只能管理指定的服务器，在inventory文件中进行配置对应的主机/分组的数据，其格式如下：</p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">-<span class="ruby">-组名（对系统进行分组）</span></div><div class="line">[webservers]</div><div class="line">-<span class="ruby">-主机名</span></div><div class="line">foo.example.com</div><div class="line">                             </div><div class="line">-<span class="ruby">-指定系统的别名 + ssh的用户</span></div><div class="line">jumper ansible_ssh_host=192.168.1.50 ansible_ssh_user=appadmin</div><div class="line">        </div><div class="line">-<span class="ruby">-<span class="number">01</span>到<span class="number">50</span>,一组相似的hostname</span></div><div class="line">www[01:50].example.com</div><div class="line"></div><div class="line">-<span class="ruby">-给host设定变量，后续playbook中可以使用</span></div><div class="line">host1 http_port=80 maxRequestsPerChild=808</div><div class="line"></div><div class="line">-<span class="ruby">-给group设定变量，应用于组内的所有host</span></div><div class="line">[atlanta]</div><div class="line">host1</div><div class="line">host2</div><div class="line"></div><div class="line">[atlanta:vars]</div><div class="line">ntp_server=ntp.atlanta.example.com</div><div class="line">proxy=proxy.atlanta.example.com    </div><div class="line"></div><div class="line">-<span class="ruby">-组内组</span></div><div class="line">[southeast:children]</div><div class="line">atlanta</div><div class="line">raleigh</div></pre></td></tr></table></figure>
<h3 id="Ansible-Ad-Hoc-命令"><a href="#Ansible-Ad-Hoc-命令" class="headerlink" title="Ansible Ad-Hoc 命令"></a>Ansible Ad-Hoc 命令</h3><ul>
<li>临时执行的命令</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ansible <span class="tag">&lt;<span class="name">pattern_goes_here[webservers,</span> <span class="attr">all</span>, *]&gt;</span> -m <span class="tag">&lt;<span class="name">module_name</span>&gt;</span> -a <span class="tag">&lt;<span class="name">arguments</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>不指定module的话，则默认执行command模块</li>
<li>ansible-doc: 获取模块列表，以及模块使用格式<ul>
<li>ansible-doc [-l] [-s MODULE]<ul>
<li>-l : 列出支持的核心模块</li>
<li>-s MODULE : 查看模块的用法</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="使用例子：ping主机"><a href="#使用例子：ping主机" class="headerlink" title="使用例子：ping主机"></a>使用例子：ping主机</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ansible -<span class="selector-tag">i</span> hosts webservers -m ping --ask-pass -u user</div><div class="line">ansible -<span class="selector-tag">i</span> hosts all -m ping --ask-pass -u user</div></pre></td></tr></table></figure>
<p>输出：</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">[root<span class="symbol">@Centos7</span> ~]<span class="meta"># ansible all -m ping</span></div><div class="line">host1 | success &gt;&gt; &#123;</div><div class="line">    <span class="string">"changed"</span>: <span class="literal">false</span>,</div><div class="line">    <span class="string">"ping"</span>: <span class="string">"pong"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">host2 | UNREACHABLE! =&gt; &#123;</div><div class="line">    <span class="string">"changed"</span>: <span class="literal">false</span>,</div><div class="line">    <span class="string">"msg"</span>: <span class="string">"Authentication failed."</span>,</div><div class="line">    <span class="string">"unreachable"</span>: <span class="literal">true</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="参数解释"><a href="#参数解释" class="headerlink" title="参数解释"></a>参数解释</h4><ul>
<li>-m, –module-name: module name to execute(default=command)<ul>
<li>-m ping : 执行ping module</li>
</ul>
</li>
<li>-a, –args: module arguments</li>
<li>-i, –inventory-file: specify inventory host path(default=/etc/ansible/hosts) or comma separated host list.</li>
<li>-k, –ask-pass: ask for connection password</li>
<li>-u REMOTE_USER, –user=REMOTE_USER: connect as this user (default=None)</li>
<li>webservers 表示执行该命令的分组，all 表示inventory中配置的所有主机</li>
<li>-l, –limit=SUBSET: further limit selected hosts to an additional pattern,限定组或host来执行playbook</li>
<li>-c, –connect: connect type to use (default=smart)</li>
<li>–ask-vault-pass: ask for vault password(sudo 模式需要)</li>
<li>-b, –become: run operations with become (does not imply password prompting)(使用playbook制定的become_user进行操作)</li>
<li>-t TAGS, –tags=TAGS: only run plays and tasks tagged with these values</li>
<li>-C, –check: don’t make any changes; instead, try to predict some of the changes that may occur</li>
</ul>
<h3 id="Ansible-Playbook"><a href="#Ansible-Playbook" class="headerlink" title="Ansible Playbook"></a>Ansible Playbook</h3><ul>
<li>Ad-Hoc命令只能执行一些临时性的、简单的命令</li>
<li>实际企业应用需要经过多个步骤，且各个步骤之间存在依赖关系，Ad-Hoc命令无法满足使用需求</li>
<li>使用playbook来定义步骤以及依赖</li>
<li>playbook 由yaml编写，让远程主机按照事先编排的机制执行task</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="meta">---</span></div><div class="line"><span class="attr">- hosts:</span> all    <span class="comment">#执行tasks的主机，all表示所有</span></div><div class="line"><span class="attr">  become:</span> <span class="literal">yes</span>   <span class="comment">#使用特定用户执行tasks，该参数也可以配置在相应task中。</span></div><div class="line"><span class="attr">  become_user:</span> root</div><div class="line"><span class="attr">  remote_user:</span> username <span class="comment">#the user log into machine.</span></div><div class="line">  </div><div class="line"><span class="attr">  tasks:</span></div><div class="line">    <span class="comment"># 每个task都相当于在执行对应模块的功能</span></div><div class="line">    <span class="comment"># 每个task感觉都是单次的连接，执行完之后断掉，之前的环境变量设置不会在后续的task中生效</span></div><div class="line">    <span class="comment"># 描述task</span></div><div class="line"><span class="attr">    - name:</span> copy local file to remote machine</div><div class="line">      <span class="comment"># 执行对应模块功能</span></div><div class="line"><span class="attr">      copy:</span> </div><div class="line"><span class="attr">        src:</span> ~/test</div><div class="line"><span class="attr">        dest:</span> ~/test</div><div class="line"><span class="attr">        owner:</span> root </div><div class="line"><span class="attr">        mode:</span> <span class="number">0600</span></div><div class="line">      <span class="comment"># 命令执行的结果存到变量中，方便后续使用</span></div><div class="line"><span class="attr">      register:</span> rsa</div><div class="line">      <span class="comment"># 设置环境变量</span></div><div class="line"><span class="attr">      environment:</span></div><div class="line"><span class="attr">        JAVA_HOME:</span> /usr/java/jre1<span class="number">.8</span><span class="number">.0</span>_51</div><div class="line">      <span class="comment"># task有失败之后，相同host后续的task不会执行，该参数可在失败后继续执行。</span></div><div class="line"><span class="attr">      ignore_errors:</span> <span class="literal">yes</span></div><div class="line">      <span class="comment"># 给这部分task打上tags，可指定只执行相应tags的task  (命令中添加：-t deploy)</span></div><div class="line"><span class="attr">      tags:</span> deploy</div><div class="line">      <span class="comment"># (call the tasks defined in handlers if module does some changes to the remote host)</span></div><div class="line"><span class="attr">      notify:</span></div><div class="line"><span class="bullet">        -</span> do something</div><div class="line">            </div><div class="line">    <span class="comment"># defines a list of tasks</span></div><div class="line"><span class="attr">    handlers:</span></div><div class="line"><span class="attr">      - name:</span> do something</div><div class="line"><span class="attr">        service:</span> test</div><div class="line"></div><div class="line"><span class="attr">    - name:</span> task <span class="number">2</span></div><div class="line"><span class="attr">      debug:</span> var=&#123;&#123; host_vars &#125;&#125; <span class="comment"># 使用对应host的host_vars变量</span></div></pre></td></tr></table></figure>
<ul>
<li><p>例：在几台机子中执行hostname命令，并获取返回值</p>
<ul>
<li><p>文件目录：</p>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">test        </span># inventory文件，配置主机</div><div class="line">test.yml    # playbook</div></pre></td></tr></table></figure>
</li>
<li><p>inventory 配置内容</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[server]</div><div class="line">host1 ansible_ssh_host=<span class="number">1.1</span><span class="number">.1</span><span class="number">.1</span> ansible_ssh_user=appadmin</div><div class="line">host2 ansible_ssh_host=<span class="number">1.1</span><span class="number">.1</span><span class="number">.2</span> ansible_ssh_user=appadmin</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<pre><code>* test.yml 内容

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">---</span></div><div class="line"><span class="attr">- hosts:</span> all</div><div class="line"><span class="attr">  tasks:</span></div><div class="line"><span class="attr">    - name:</span> get hostname</div><div class="line"><span class="attr">      shell:</span> hostname</div><div class="line"><span class="attr">      register:</span> out</div><div class="line"></div><div class="line"><span class="attr">    - debug:</span> var=out</div></pre></td></tr></table></figure>


* 执行playbook：<figure class="highlight plain"><figcaption><span>ansible-playbook -i test test.yml ```，返回内容：</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">```    </div><div class="line">PLAY [all] *********************************************************************</div><div class="line"></div><div class="line">TASK [setup] *******************************************************************</div><div class="line">ok: [host1]</div><div class="line">ok: [host2]</div><div class="line"></div><div class="line">TASK [get hostname] ************************************************************</div><div class="line">changed: [host1]</div><div class="line">changed: [host2]</div><div class="line"></div><div class="line">TASK [debug] *******************************************************************</div><div class="line">ok: [host1] =&gt; &#123;</div><div class="line">    &quot;out&quot;: &#123;</div><div class="line">        &quot;changed&quot;: true,</div><div class="line">        &quot;cmd&quot;: &quot;hostname&quot;,</div><div class="line">        &quot;delta&quot;: &quot;0:00:00.003584&quot;,</div><div class="line">        &quot;end&quot;: &quot;2017-02-09 16:05:04.043118&quot;,</div><div class="line">        &quot;rc&quot;: 0,</div><div class="line">        &quot;start&quot;: &quot;2017-02-09 16:05:04.039534&quot;,</div><div class="line">        &quot;stderr&quot;: &quot;&quot;,</div><div class="line">        &quot;stdout&quot;: &quot;host1.com&quot;,</div><div class="line">        &quot;stdout_lines&quot;: [</div><div class="line">            &quot;host1.com&quot;</div><div class="line">        ],</div><div class="line">        &quot;warnings&quot;: []</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">ok: [host2] =&gt; &#123;</div><div class="line">    &quot;out&quot;: &#123;</div><div class="line">        &quot;changed&quot;: true,</div><div class="line">        &quot;cmd&quot;: &quot;hostname&quot;,</div><div class="line">        &quot;delta&quot;: &quot;0:00:00.003584&quot;,</div><div class="line">        &quot;end&quot;: &quot;2017-02-09 16:05:04.043118&quot;,</div><div class="line">        &quot;rc&quot;: 0,</div><div class="line">        &quot;start&quot;: &quot;2017-02-09 16:05:04.039534&quot;,</div><div class="line">        &quot;stderr&quot;: &quot;&quot;,</div><div class="line">        &quot;stdout&quot;: &quot;host2.com&quot;,</div><div class="line">        &quot;stdout_lines&quot;: [</div><div class="line">            &quot;host1.com&quot;</div><div class="line">        ],</div><div class="line">        &quot;warnings&quot;: []</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">PLAY RECAP *********************************************************************</div><div class="line"># 以下是对应host的task执行情况，ok表示执行成功的task数量，charged表示对host产生修改的task数量。</div><div class="line">host1                         : ok=3    changed=1    unreachable=0    failed=0</div><div class="line">host2                         : ok=3    changed=1    unreachable=0    failed=0</div></pre></td></tr></table></figure>
</code></pre><h3 id="role-使用"><a href="#role-使用" class="headerlink" title="role 使用"></a>role 使用</h3><ul>
<li>playbook 直接调用 task 问题<ul>
<li>playbook 是需要处理的事情，task 是执行细节，playbook并不关心细节</li>
<li>playbook 直接调用task 使task无法复用</li>
<li>playbook会越来越长，难维护</li>
</ul>
</li>
<li>将一个或多个task抽象成一个role，隐藏细节，供playbook调用</li>
<li>role易于复用，可以从一个已知的文件结构中自动加载vars, tasks, handler。</li>
<li>部分文件结构：</li>
</ul>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">test</span></div><div class="line">test.yml</div><div class="line">roles/</div><div class="line">    install/</div><div class="line">        files/</div><div class="line">        templates/</div><div class="line">        tasks/</div><div class="line">            main.yml  #应用 install 时，优先执行main.yml</div><div class="line">        handlers/</div><div class="line">        vars/</div><div class="line">    deploy/</div><div class="line">        files/</div><div class="line">        templates/</div><div class="line">        tasks/</div><div class="line">            main.yml</div><div class="line">        handlers/</div><div class="line">        vars/</div></pre></td></tr></table></figure>
<ul>
<li>playbook内容</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">---</span></div><div class="line"><span class="attr">- hosts:</span> webservers</div><div class="line"><span class="attr">  roles:</span></div><div class="line"><span class="bullet">     -</span> install</div><div class="line"><span class="bullet">     -</span> deploy</div></pre></td></tr></table></figure>
<h3 id="部分常用模块"><a href="#部分常用模块" class="headerlink" title="部分常用模块"></a>部分常用模块</h3><ul>
<li>file: 包含了文件、文件夹、超级链接类的创立、拷贝、移动、删除操作。</li>
<li>copy: copy a file on the local box to remote locations. (可以使用 remote_src，使src在远程机子上，2.0 以后的版本适用）</li>
<li>fetch: copy files from remote locations to the local box.</li>
<li>template: Templates a file out to a remote server.</li>
<li>command: Executes a command on a remote node(It will not be processed through the shell, so variables like $HOME and operations like “&lt;”, “&gt;”, “|”, “;” and “&amp;” will not work)If you want to execute a command securely and predictably, it may be better to use the command module instead. </li>
<li>lineinfile: Ensure a particular line is in a file, or replace an existing line using a back-referenced regular expression.</li>
<li>pause : Pause playbook execution</li>
<li>ping : Try to connect to host, verify a usable python and return pong on success. no sense in playbook.</li>
<li>shell : Execute commands in nodes.(runs the command through a shell (/bin/sh) on the remote node.)If you want to execute a command securely and predictably, it may be better to use the command module instead. </li>
<li>debug : Print statements during execution</li>
<li>setup : Gathers facts about remote hosts（默认执行）,支持filter。</li>
<li>apt : Manages apt-packages</li>
<li>service: Controls services on remote hosts</li>
<li>fail: Fail with custom message</li>
<li>subversion: Deploys a subversion repository.</li>
<li>group: Add or remove groups</li>
<li>user: Manage user accounts</li>
<li>get_url: Downloads files from HTTP, HTTPS, or FTP to node</li>
<li>wait_for: Waits for a condition before continuing.(port is open , file is present, and so on.)</li>
<li>script: Runs a local script on a remote node after transferring it</li>
</ul>
<h3 id="实际场景应用"><a href="#实际场景应用" class="headerlink" title="实际场景应用"></a>实际场景应用</h3><ul>
<li>可以考虑使用原生的ansible进行管理，参考：<a href="https://lanourain.github.io/2017/01/24/ansible-best-practice-summary/">Ansible Best Practices Summary</a> </li>
<li>除了ansible自家出的 <a href="https://www.ansible.com/tower" target="_blank" rel="external">ansible tower</a>, 也可以考虑尝试一些开源的ui，<a href="https://github.com/ansible-semaphore/semaphore" target="_blank" rel="external">semaphore</a>，  <a href="http://blog.yongbin.me/2017/02/15/semaphore/" target="_blank" rel="external">semaphore使用教程</a>，<a href="https://github.com/alaxli/ansible_ui" target="_blank" rel="external">ansible ui</a>，或者用django自己实现一个前端完成简单的管理。</li>
</ul>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><p><a href="http://nonemaw.com/2016/02/20/an-intro-to-network-automation-3-ansible/" target="_blank" rel="external">an-intro-to-network-automation-3-ansible</a><br><a href="https://serversforhackers.com/an-ansible-tutorial" target="_blank" rel="external">an-ansible-tutorial</a><br><a href="https://blog.goquxiao.com/posts/2015/09/01/ansible-simple-tutorial/" target="_blank" rel="external">ansible-simple-tutorial</a></p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://lanourain.github.io/2017/02/16/ansible_basic/" data-id="ciz81hilg0000368ob9bwsfgh" class="article-share-link">Share</a><div class="tags"><a href="/tags/ansible/">ansible</a></div><div class="post-nav"><a href="/2017/03/08/proxy_pattern_and_dynamic_proxy/" class="pre">代理模式和动态代理</a><a href="/2017/02/03/version_control/" class="next">项目版本管理模型</a></div><div id="disqus_thread"><script>var disqus_shortname = 'lanourain@gmail.com';
var disqus_identifier = '2017/02/16/ansible_basic/';
var disqus_title = 'ansible基础教程';
var disqus_url = 'http://lanourain.github.io/2017/02/16/ansible_basic/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//lanourain@gmail.com.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://lanourain.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/design-patterns/" style="font-size: 15px;">design_patterns</a> <a href="/tags/daily/" style="font-size: 15px;">daily</a> <a href="/tags/软件工程/" style="font-size: 15px;">软件工程</a> <a href="/tags/ansible/" style="font-size: 15px;">ansible</a> <a href="/tags/Team/" style="font-size: 15px;">Team</a> <a href="/tags/Management/" style="font-size: 15px;">Management</a> <a href="/tags/project/" style="font-size: 15px;">project</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/Reading/" style="font-size: 15px;">Reading</a> <a href="/tags/动漫/" style="font-size: 15px;">动漫</a> <a href="/tags/历史/" style="font-size: 15px;">历史</a> <a href="/tags/bit/" style="font-size: 15px;">bit</a> <a href="/tags/algorithm/" style="font-size: 15px;">algorithm</a> <a href="/tags/effective-java/" style="font-size: 15px;">effective java</a> <a href="/tags/jvm/" style="font-size: 15px;">jvm</a> <a href="/tags/jdk/" style="font-size: 15px;">jdk</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/06/27/ArrayList-And-LinkedList/">ArrayList和LinkedList浅析</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/21/JVM-2-GC/">深入理解Java虚拟机 - 垃圾收集器与内存分配策略</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/20/JVM-1-Memory-Model/">深入理解Java虚拟机 - Java内存模型</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/18/effective-java/">effective java 笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/17/singleton/">单例模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/17/promise_patterns/">Promise模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/28/OKR-Summary/">OKR简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/22/use_bit_manipulation_to_solve_problems_easily_and_efficiently/">使用位运算解决问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/19/Gintama/">浪客剑心和银魂背后的历史</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/08/proxy_pattern_and_dynamic_proxy/">代理模式和动态代理</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Recent Comments</i></div><script type="text/javascript" src="//lanourain@gmail.com.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Blogroll</i></div><ul></ul><a href="http://blog.yongbin.me/" title="El Psy Congroo" target="_blank">El Psy Congroo</a><ul></ul><a href="https://majiahui.github.io/" title="Jiahui's Blog" target="_blank">Jiahui's Blog</a><ul></ul><a href="http://czmonster.com/" title="Day Day Up" target="_blank">Day Day Up</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Lanourain's blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>